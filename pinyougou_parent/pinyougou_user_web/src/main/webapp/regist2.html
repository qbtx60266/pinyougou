
<html>

	<head>
		<meta content="application/xhtml+xml;charset=UTF-8" http-equiv="Content-Type">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<title>我的速运-注册</title>

		<link rel="stylesheet" type="text/css" href="./css/styleloginsign.css">
		<link rel="stylesheet" type="text/css" href="./css/bootstrap/bootstrap.min.css">

		<script type="text/javascript" src="./js/jquery.min.js"></script>
		<script type="text/javascript" src="./js/bootstrap.min.js"></script>
		<script type="text/javascript" src="./js/self/effect.js"></script>
		<script type="text/javascript" src="./js/angular.min.js"></script>

		<!--[if IE]>
    <script  type="text/javascript" src="js/html5.js"></script>
    <script  type="text/javascript" src="js/respond.min.js"></script>
    <![endif]-->
	</head>

	<body>
		<!--head-->
		<div class="loginnav">
			<nav class="navbar navbar-default">
				<div class="container">
					<div class="navbar-header">
						<a class="navbar-brand" href="#"><img src="images/icon/logo.png"></a>
						<span class="logintitle">用户注册</span>
					</div>

				</div>

			</nav>
		</div>
		<div class="container">
			<!--mainsignup-->
			<section class="mainsign">
				<div class="headnav">

				</div>

				<div class="signup" ng-app="signupApp" ng-controller="signupCtrl">
					<div class="col-md-9 signupbox">
						<form id="customerForm" action="customer_regist.action" method="post" class="form col-md-6">
							<div class=" form-group">
								<label for="inputaccount" class="col-sm-3 control-label"><b>*</b>手机号</label>
								<div class="col-sm-8">
									<input type="text" class="form-control" name="telephone" ng-model="telephone" id="inputaccount" placeholder="请输入手机号">
								</div>
							</div>
							<div class="form-group">
								<label for="inputaccount" class="col-sm-3 control-label"><b>*</b>验证码</label>
								<div class="col-sm-5">
									<input type="text" class="form-control" id="inputaccount" placeholder="请输入验证码" name="checkcode">
								</div>
								<div class="col-sm-3 song">
									<!-- 发送验证码按钮 -->
									<!-- 发送验证码按钮 -->
									<a class="btn btn-default" 
										ng-click="getCheckCode()" ng-bind="btnMsg">
									</a>
								</div>

							</div>
							<div class="form-group">
								<label for="inputaccount" class="col-sm-3 control-label"><b>*</b>密码</label>
								<div class="col-sm-8">
									<input type="password" class="form-control" id="inputaccount" placeholder="6-16位数字或英文字母" name="password">
									<p class="text-right grey">安全强度：*****</p>
								</div>

							</div>

							<div class="form-group">
								<label for="inputaccount" class="col-sm-3 control-label"><b>*</b>确认密码</label>
								<div class="col-sm-8">
									<input type="password" class="form-control" id="inputaccount" placeholder="6-16位数字或英文字母">
								</div>
							</div>
							<div class="form-group">
								<label for="inputaccount" class="col-sm-3 control-label"><b>*</b>绑定邮箱</label>
								<div class="col-sm-8">
									<input type="email" class="form-control" id="inputemail" placeholder="请输入需要绑定的邮箱" name="email">
								</div>
							</div>
							<div class="form-group">
								<div class="col-sm-offset-3 col-sm-8 song">
									<div class="checkbox">
										<label>
      <input type="checkbox"> 查看并同意<a href="#"> 《速运快递服务协议》</a>
    </label>
									</div>

								</div>
							</div>
							<div class="form-group signbtn">
								<div class="col-sm-offset-3 col-sm-8 song">
									<a class="btn btn-danger" href="javascript:$('#customerForm').submit();">注册</a>
								</div>
							</div>

						</form>

					</div>
					<div class="col-md-3 introbox">
						<div class="signintro">
							<h5 class="redtext">注册成为速运会员，您可以享受更多的服务！</h5>
							<ul>
								<li class="list-group">积分奖励，电子运单专享特权</li>
								<li class="list-group">快速理赔，保价优惠</li>
								<li class="list-group">大陆偏远地区附加费减免</li>
								<li class="list-group">快件路由订阅，快件信息管理，批量下单</li>

							</ul>
						</div>

					</div>
				</div>
			</section>

		</div>

		<!--foot-->
		<footer>
			<section class="copyright size12">
				<div class="container">
					<p class="text-center">地址：北京市昌平区建材城西路金燕龙办公楼一层 邮编：100096 电话：400-618-4000 传真：010-82935100 </p>
					<p class="text-center">京ICP备08001421号京公网安备110108007702</p>
				</div>
			</section>
		</footer>

		<script type="text/javascript">
			
			
			/*document.cookie="user=123";
			var strCookie=document.cookie; 
			var arrCookie=strCookie.split("; "); 
			var user; 

//遍历cookie数组，处理每个cookie对 

			for(var i=0;i<arrCookie.length;i++){ 

         	var arr=arrCookie[i].split("="); 

         	//找到名称为userId的cookie，并返回它的值 

         		if("user"==arr[0]){ 

               	 	user=arr[1]; 

                	break; 

         		} 
	
			} 

			alert(user); */
			
			
			//发送验证码时添加cookie
function addCookie(name,value,expiresHours){ 
    var cookieString=name+"="+escape(value); //"userid=123"
    //判断是否设置过期时间,0代表关闭浏览器时失效
    if(expiresHours>0){ 
        var date=new Date(); //当前存储cookie时间
        date.setTime(date.getTime()+expiresHours*1000); 
        cookieString=cookieString+";expires=" + date.toUTCString(); //"userid=6;expires=????"setMaxAge
    } 
        document.cookie=cookieString; 
} 
//修改cookie的值
function editCookie(name,value,expiresHours){ 
    var cookieString=name+"="+escape(value); 
    if(expiresHours>0){ 
      var date=new Date(); 
      date.setTime(date.getTime()+expiresHours*1000); //单位是毫秒
      cookieString=cookieString+";expires=" + date.toGMTString(); 
    } 
      document.cookie=cookieString; 
} 
//根据名字获取cookie的值
function getCookieValue(name){ //持续读秒
      var strCookie=document.cookie; 
      var arrCookie=strCookie.split("; "); //a=1;b=2
      for(var i=0;i<arrCookie.length;i++){ 
        var arr=arrCookie[i].split("="); //a=1
        if(arr[0]==name){//a
          return unescape(arr[1]);
          break;
        }/* else{
             return ""; 
             break;
         }  */
      } 
      return "";
       
}
			
			
			
			
			var signupApp=angular.module("signupApp",[]);
			signupApp.controller("signupCtrl",["$scope",function($scope){
				$scope.btnMsg="发送验证码";
				var active=true;
				var second=60;
				var secondInterval;
			
				$scope.getCheckCode=function(){
					if(active==false){
						return;
					}
					//alert(getCookieValue("secondsremained"));
					if(getCookieValue("secondsremained")==-1 || getCookieValue("secondsremained")==""){//cookie不存在
						addCookie("secondsremained",second,second);//添加cookie记录,有效时间60s
					}
					
					active=false;
					secondInterval=setInterval(function(){
						var secondv = getCookieValue("secondsremained");
						if(secondv<0){
							$scope.btnMsg="重新发送验证码";
							$scope.$digest();
							active=true;
							second=60;
							clearInterval(secondInterval);
							secondInterval=undefined;
							
						}else{
							$scope.btnMsg=secondv+"秒后重新发送验证码";
							$scope.$digest();
							secondv--;
							editCookie("secondsremained",secondv,secondv+1);
							
						}
					},1000)
				}
				
			}]);
			
			
			
			
		
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			/*var signupApp=angular.module("signupApp",[]);
			signupApp.controller("signupCtrl",["$scope",function($scope){
				$scope.btnMsg="发送验证码";
				var active=true;
				var seconds=6;
				var secondInterval;
				$scope.getCheckCode=function(){
					if(active==false){
						return;
					}
					active=false;
					secondInterval=setInterval(function(){
						if(seconds<0){
							$scope.btnMsg="重新发送验证码";
							$scope.$digest();
							active=true;
							clearInterval(secondInterval);
							secondInterval=undefined;
							seconds=6;
						}else{
							$scope.btnMsg=seconds+"秒后重发";
							$scope.$digest();
							seconds--;
						}
					},1000);
				}
			}]);*/
			
			
			
			
			
		</script>
	</body>

</html>